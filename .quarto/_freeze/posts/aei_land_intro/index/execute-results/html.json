{
  "hash": "5a33603c5c99e48e9cc37ce9a280ca47",
  "result": {
    "markdown": "---\ntitle: \"Can we measure the price of land?\"\nsubtitle: | \n  Exploring AEI's Land Price Indicator experimental data\ndate: \"2022-11-18\"\nformat: \n  html:\n    fig-width: 8\n    fig-height: 4\n    code-fold: false\nexecute:\n  freeze: auto\nimage: output/diagram.png\ncategories: [data]\ndraft: true\n---\n\n\n\n\nI've been ill and also using too much Python for work so I wanted a short exercise in R.\n\n## What goes into home prices, anyway?\n\nThe price of a house is determined in part by the cost of the structure itself and the cost of the land upon which the structure is built. Of course, there are so many factors that affect those two inputs (construction supply, labor costs, and mortgage rates, to name a few). While the price of homes can me measured through valuations and transactions, the price of the land itself is harder to grasp.\n\n## Background\n\nA team of researchers associated with Rutgers, the American Enterprise Institute, and the Federal Housing Finance Agency have attempted to measure variations in home price over the years to capture\n\n[link](https://www.aei.org/housing/land-price-indicators/)\n\n# Loading the data\n\nThe data download is a large Microsoft Excel file with sheets that measure different geographies, from national aggregates down to the census tract level. I will start with ZIP codes because the census tract data is sparse, with many tracts missing data entirely. Tracts are small! While I load the data, I'll rename some complicated column names, and change one column from text to boolean.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nxl = \"https://www.aei.org/wp-content/uploads/2021/05/AEI_adjusted-Land-Data-2020-1.xlsx?x91208\"\nzip_codes = openxlsx::read.xlsx( # using \n    xl, \n    sheet=5, # zip code sheet \n    cols = 1:7 # ignore note\n  ) %>% # I love R pipes :)\n  rename(\n    Land.Value = \"Land.Value.(Per.Acre,.As-Is)\",\n    Std.Land.Value = \"Land.Value.(1/4.Acre.Lot,.Standardized)\",\n    Land.Percent = \"Land.Share.of.Property.Value\",\n    HPA = \"Home.Price.Appreciation.(HPA)\",\n    Imputed = \"Land.Share.Imputed?\"\n  ) %>%\n  mutate( # this might not save much memory but feels appropriate\n    Imputed = ifelse(Imputed == \"Y\", TRUE, FALSE)\n  )\n\nsummary(zip_codes)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   ZIP.Code              Year        Land.Value       Std.Land.Value   \n Length:162909      Min.   :2012   Min.   : -211100   Min.   : -35000  \n Class :character   1st Qu.:2014   1st Qu.:   94600   1st Qu.:  38300  \n Mode  :character   Median :2016   Median :  221100   Median :  77400  \n                    Mean   :2016   Mean   :  658052   Mean   : 155744  \n                    3rd Qu.:2018   3rd Qu.:  567100   3rd Qu.: 164100  \n                    Max.   :2020   Max.   :48410200   Max.   :4906000  \n                                   NA's   :28818      NA's   :28818    \n  Land.Percent          HPA         Imputed       \n Min.   :-0.6170   Min.   :0.743   Mode :logical  \n 1st Qu.: 0.2440   1st Qu.:1.065   FALSE:69642    \n Median : 0.3550   Median :1.206   TRUE :26433    \n Mean   : 0.3666   Mean   :1.277   NA's :66834    \n 3rd Qu.: 0.4770   3rd Qu.:1.419                  \n Max.   : 0.9400   Max.   :3.524                  \n                                                  \n```\n:::\n:::\n\n\nThis is a lot of information that I'd like to investigate, but I don't have any background on real estate economics. For now, I'd like visualize all the place I call home *(it would be a bad idea to post my address on the internet, right?)*. Lets look at ZIP code `15217`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nzip_codes %>%\n  filter(ZIP.Code == \"15217\") %>% \n  ggplot(data=., aes(x=Year)) +\n  geom_col(aes(y=Std.Land.Value), fill=\"#299c5e\") +\n  labs(y = \"Standardized Land Value\",\n       title = \"Land Price Appreciation in the ZIP code 15217\") +\n  scale_x_continuous(breaks = 2012:2020) +\n  geom_line(aes(y=Land.Percent*3e5), size=1.5, color=\"red\", group=1) +\n  scale_y_continuous(sec.axis = sec_axis(~./3e5, name = \"Land Share of Value\")) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# cbsa = read.xlsx(\"https://www.aei.org/wp-content/uploads/2021/05/AEI_adjusted-Land-Data-2020-1.xlsx?x91208\",sheet=3)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstate = openxlsx::read.xlsx(\"https://www.aei.org/wp-content/uploads/2021/05/AEI_adjusted-Land-Data-2020-1.xlsx?x91208\",sheet=2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = state) +  \n  geom_line(\n    aes(x = Year,\n        y = Land.Share.of.Property.Value,\n        color = State)\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=768}\n:::\n:::\n\n\nMore reading at Joey Politano's blog [here](https://www.apricitas.io/p/americas-fractured-housing-market).\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}